<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" x:Class="articleapp.ProfilePage">

    <ContentPage.Background>
        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#000000" Offset="0.0" />
            <GradientStop Color="#1a0b2e" Offset="1.0" />
        </LinearGradientBrush>
    </ContentPage.Background>

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="24,40">

            <Grid RowSpacing="15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>


                <Frame Grid.Row="0" 
                   HeightRequest="120" 
                   WidthRequest="120"
                   CornerRadius="60"
                   Padding="0"
                   IsClippedToBounds="True"
                   HorizontalOptions="Center"
                   BorderColor="#4F46E5">
                    <Grid>
                        <Image Aspect="AspectFill"
                           Source="profile_placeholder.jpg"/>
                        <Button Text="Edit"
                            BackgroundColor="#4F46E5"
                            TextColor="White"
                            FontFamily="Jersey15"
                            VerticalOptions="End"
                            HeightRequest="40"
                            Opacity="0.9"/>
                    </Grid>
                </Frame>

                
                <VerticalStackLayout Grid.Row="1" 
                               Spacing="10" 
                               HorizontalOptions="Center">
                    <Label Text="John Doe"
                       TextColor="White"
                       FontSize="24"
                       FontFamily="Jersey15"
                       HorizontalOptions="Center"/>

                    <HorizontalStackLayout Spacing="20" 
                                     HorizontalOptions="Center">
                        <Button Text="1.2K Following"
                            TextColor="White"
                            FontFamily="Jersey15"
                            BackgroundColor="Transparent"
                            BorderColor="#4F46E5"
                            BorderWidth="1"
                            CornerRadius="20"/>

                        <Button Text="3.4K Likes"
                            TextColor="White"
                            FontFamily="Jersey15"
                            BackgroundColor="Transparent"
                            BorderColor="#4F46E5"
                            BorderWidth="1"
                            CornerRadius="20"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>

                <!-- Hobby Tags Section -->
                <FlexLayout Grid.Row="2"
                       Wrap="Wrap"
                       JustifyContent="Center"
                       BindableLayout.ItemsSource="{Binding Hobbies}"
                       Margin="0,10">
                    <FlexLayout.Resources>
                        <Style TargetType="Frame">
                            <Setter Property="Padding" Value="12,6"/>
                            <Setter Property="CornerRadius" Value="25"/>
                            <Setter Property="BackgroundColor" Value="#2D1F47"/>
                            <Setter Property="Margin" Value="4"/>
                        </Style>
                    </FlexLayout.Resources>
                    <Frame>
                        <Label Text="ðŸŽ® Gaming" TextColor="White" FontFamily="Jersey15"/>
                    </Frame>
                    <Frame>
                        <Label Text="ðŸ“š Reading" TextColor="White" FontFamily="Jersey15"/>
                    </Frame>
                    <Frame>
                        <Label Text="ðŸƒ Fitness" TextColor="White" FontFamily="Jersey15"/>
                    </Frame>
           
                </FlexLayout>
            </Grid>

            <!-- Articles Tabs Section -->
            <Grid RowDefinitions="Auto,*">
                <!-- Tab Headers -->
                <Grid Grid.Row="0" ColumnDefinitions="*,*" Margin="0,0,0,15">
                    <Grid.Resources>
                        <Style TargetType="Frame">
                            <Setter Property="BackgroundColor" Value="Transparent"/>
                            <Setter Property="Padding" Value="10"/>
                            <Setter Property="HasShadow" Value="False"/>
                        </Style>
                        <Style TargetType="Label">
                            <Setter Property="FontFamily" Value="Jersey15"/>
                            <Setter Property="FontSize" Value="18"/>
                            <Setter Property="HorizontalOptions" Value="Center"/>
                        </Style>
                    </Grid.Resources>

                    
                    <!--<Frame Grid.Column="0" BorderColor="{Binding MyArticlesSelected, Converter={StaticResource BoolToColorConverter}}">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding ShowMyArticlesCommand}"/>
                        </Frame.GestureRecognizers>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="My Articles" TextColor="White"/>
                            <BoxView HeightRequest="2" 
                                BackgroundColor="#4F46E5"
                                IsVisible="{Binding MyArticlesSelected}"/>
                        </VerticalStackLayout>
                    </Frame>-->


                    <Frame Grid.Column="0" >
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding ShowMyArticlesCommand}"/>
                        </Frame.GestureRecognizers>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="My Articles" TextColor="White"/>
                            <BoxView HeightRequest="2" 
            BackgroundColor="#4F46E5"
            IsVisible="{Binding MyArticlesSelected}"/>
                        </VerticalStackLayout>
                    </Frame>

                    <!--<Frame Grid.Column="1" BorderColor="{Binding SavedArticlesSelected, Converter={StaticResource BoolToColorConverter}}">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding ShowSavedArticlesCommand}"/>
                        </Frame.GestureRecognizers>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Saved Articles" TextColor="White"/>
                            <BoxView HeightRequest="2" 
                                BackgroundColor="#4F46E5"
                                IsVisible="{Binding SavedArticlesSelected}"/>
                        </VerticalStackLayout>
                    </Frame>-->
                    
                    
                    <Frame Grid.Column="1" >
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding ShowSavedArticlesCommand}"/>
                        </Frame.GestureRecognizers>
                        <VerticalStackLayout Spacing="5">
                            <Label Text="Saved Articles" TextColor="White"/>
                            <BoxView HeightRequest="2" 
                  BackgroundColor="#4F46E5"
                  IsVisible="{Binding SavedArticlesSelected}"/>
                        </VerticalStackLayout>
                    </Frame>
                </Grid>

                <!-- Tab Content -->
                <CollectionView Grid.Row="1" 
                          ItemsSource="{Binding CurrentArticles}"
                          IsVisible="true">
                    <CollectionView.ItemsLayout>
                        <LinearItemsLayout Orientation="Vertical" ItemSpacing="15"/>
                    </CollectionView.ItemsLayout>
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame BackgroundColor="#1E293B"
                               Padding="15"
                               CornerRadius="16"
                               HasShadow="False"
                               BorderColor="#334155">
                                <Frame.GestureRecognizers>
                                    <!--<TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type local:ProfileViewModel}}, Path=ArticleSelectedCommand}"
                                                    CommandParameter="{Binding .}"/>-->
                                </Frame.GestureRecognizers>
                                <Grid RowSpacing="10">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <Image Grid.Row="0"
                                       Source="{Binding ImageUrl}"
                                       HeightRequest="150"
                                       Aspect="AspectFill"/>

                                    <Label Grid.Row="1"
                                       Text="{Binding Title}"
                                       TextColor="White"
                                       FontSize="18"
                                       FontFamily="Jersey15"/>

                                    <HorizontalStackLayout Grid.Row="2" 
                                                     Spacing="15">
                                        <Label Text="{Binding ReadTime}"
                                           TextColor="#94A3B8"
                                           FontSize="14"
                                           FontFamily="Jersey15"/>
                                        <Label Text="â€¢"
                                           TextColor="#94A3B8"/>
                                        <Label Text="{Binding Category}"
                                           TextColor="#4F46E5"
                                           FontSize="14"
                                           FontFamily="Jersey15"/>
                                    </HorizontalStackLayout>
                                </Grid>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>